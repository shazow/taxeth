webpackJsonp([1],{NHnr:function(t,n,e){"use strict";function r(t){var n=new Date(0);return n.setUTCSeconds(t),n.toISOString().split("T",1)[0]}Object.defineProperty(n,"__esModule",{value:!0});var o=e("mvHQ"),a=e.n(o),s=e("//Fk"),i=e.n(s),c=e("7+uW"),u={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[t._m(0,!1,!1),t._v(" "),t._l(t.$store.state.messages,function(n){return t.$store.state.messages?e("ul",{staticClass:"messages"},[e("li",{class:n.kind},[t._v(t._s(n.body))])]):t._e()}),t._v(" "),e("router-view")],2)},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"warning"},[n("h3",[this._v("WARNING")]),this._v(" "),n("p",[this._v("\n      Do not use this for anything serious.\n      It's a personal tool that is made to cover my own cases and has not been completed for general consumption.\n    ")])])}]},d=e("VU/8")({name:"app"},u,!1,function(t){e("TMTm")},null,null).exports,l=e("/ocq"),v={name:"Accounts",data:function(){return{newAccount:""}},methods:{reset:function(){this.newAccount=""},addAccount:function(t){var n=this,e=this.newAccount;e&&(this.$store.dispatch("saveAccount",e).catch(function(t){n.$store.commit("message",{kind:"error",body:String(t)})}),this.reset())}}},m={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("form",{on:{submit:function(n){n.preventDefault(),t.addAccount(n)}}},[e("h2",[t._v("Accounts")]),t._v(" "),t._l(t.$store.state.accounts,function(n,r){return e("ul",[e("li",[t._v(t._s(r))])])}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newAccount,expression:"newAccount"}],staticClass:"address",attrs:{type:"text",placeholder:"Ethereum Address"},domProps:{value:t.newAccount},on:{input:function(n){n.target.composing||(t.newAccount=n.target.value)}}}),t._v(" "),e("input",{attrs:{type:"submit",value:"Add"},on:{click:t.addAccount}})],2)},staticRenderFns:[]},f={name:"Transactions",data:function(){return{symbolTo:"CAD"}},methods:{weiToEth:function(t){return t.mul(5).div("1000000000000000000").toNumber()/5},toCurrency:function(t){return void 0===t?t:t.toLocaleString("en-US",{style:"currency",currency:this.symbolTo})}}},p={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.$store.state.txIncoming.length>0?e("table",[e("thead",[e("td",[t._v("Date")]),t._v(" "),e("td",[t._v("From")]),t._v(" "),e("td",{attrs:{colspan:"2"}},[t._v("\n      Value\n      ("+t._s(t.weiToEth(t.$store.getters.totalValue("ETH")).toFixed(3).toLocaleString())+" ETH)\n    ")]),t._v(" "),e("td",{attrs:{colspan:"2"}},[t._v("\n      Conversion\n      ("+t._s(t.toCurrency(t.weiToEth(t.$store.getters.totalValue(t.symbolTo))))+")\n    ")])]),t._v(" "),e("tbody",t._l(t.$store.state.txIncoming,function(n){return e("tr",[e("td",{staticClass:"date"},[t._v(t._s(n.date))]),t._v(" "),e("td",{staticClass:"address"},[t._v(t._s(n.from))]),t._v(" "),e("td",{staticClass:"value"},[t._v(t._s(t.weiToEth(n.value).toFixed(3).toLocaleString()))]),t._v(" "),e("td",{staticClass:"kind"},[t._v(t._s(n.kind))]),t._v(" "),e("td",{staticClass:"value"},[t._v("$"+t._s(t.toCurrency(t.$store.getters.transactionPrice(n,t.symbolTo))))]),t._v(" "),e("td",{staticClass:"kind"},[t._v(t._s(t.symbolTo))])])}))]):t._e()},staticRenderFns:[]},y={name:"Index",data:function(){return{newAccount:""}},methods:{reset:function(){this.newAccount=""},addAccount:function(t){var n=this,e=this.newAccount;e&&(this.$store.dispatch("saveAccount",e).catch(function(t){n.$store.commit("message",{kind:"error",body:String(t)})}),this.reset())}},components:{Accounts:e("VU/8")(v,m,!1,function(t){e("gA0x")},"data-v-4f292c52",null).exports,Transactions:e("VU/8")(f,p,!1,function(t){e("zTJO")},"data-v-5cd89dc4",null).exports}},h={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",[n("h1",[this._v("Taxeth")]),this._v(" "),n("Accounts"),this._v(" "),n("Transactions")],1)},staticRenderFns:[]},_=e("VU/8")(y,h,!1,function(t){e("tPvk")},"data-v-1c4e94b6",null).exports;c.a.use(l.a);var g=new l.a({routes:[{path:"/",name:"Index",component:_}]}),A=e("woOf"),T=e.n(A),b=e("BO1k"),w=e.n(b),H=e("mtWM"),x=e.n(H),S=e("NYxO"),E=e("uotZ"),k=e.n(E);c.a.use(S.a);var C=new S.a.Store({state:{messages:[],accounts:{},priceHistory:{},txIncoming:[],txOutgoing:[]},getters:{priceHistory:function(t){return function(n,e){return t.priceHistory[n]&&t.priceHistory[n][e]}},priceByDate:function(t,n){return function(t,e,r){var o=n.priceHistory(t,e);return o&&o[r]}},transactionPrice:function(t,n){return function(t,e){var r=n.priceHistory(t.kind,e);return r&&r[t.date]}},totalValue:function(t,n){return function(e){var r=new k.a(0),o=new k.a(1),a=!0,s=!1,i=void 0;try{for(var c,u=w()(t.txIncoming);!(a=(c=u.next()).done);a=!0){var d=c.value;if(d.value){var l=e===d.kind?o:n.transactionPrice(d,e);l&&(r=r.add(d.value.mul(l)))}}}catch(t){s=!0,i=t}finally{try{!a&&u.return&&u.return()}finally{if(s)throw i}}return r}}},mutations:{addAccount:function(t,n,e){t.accounts[n]||(t.accounts[n]={loading:!0,symbol:e})},addTransaction:function(t,n){var e=n.date,r=n.from,o=n.to,a=n.value,s=n.kind,i=n.isIncoming;if(!a.isZero()){(i?t.txIncoming:t.txOutgoing).push({date:e,from:r,to:o,value:a,kind:s})}},completeAccount:function(t,n){t.accounts[n].loading=!1},addPriceHistory:function(t,n){var e=n.fromSymbol,r=n.toSymbol,o=n.history;t.priceHistory[e]=t.priceHistory[e]||{},t.priceHistory[e][r]=t.priceHistory[e][r]||{},t.priceHistory[e][r]=T()({},t.priceHistory[e][r],o)},message:function(t,n){var e=n.kind,r=n.body;t.messages.push({kind:e,body:r,read:!1})},reset:function(t){t.accounts={}}},actions:{saveAccount:function(t,n){var e=t.commit,r=t.dispatch,o=t.state;if(void 0!==o.accounts[n])return i.a.reject(Error("account already saved: "+n));e("addAccount",n);var a=r("loadPriceHistory",{fromSymbol:"ETH",toSymbol:"CAD"}),s=r("loadTransactions",{symbol:"ETH",address:n});return o.priceHistory.ETH&&o.priceHistory.ETH.CAD?s:i.a.all([s,a])},loadTransactions:function(t,n){var e=t.commit,o=n.symbol,a=n.address;if("ETH"!==o)return i.a.reject(Error("invalid symbol: "+o));var s="https://api.etherscan.io/api?module=account&action=txlist&address="+a+"&sort=asc";return x.a.get(s).then(function(t){var n=!0,s=!1,i=void 0;try{for(var c,u=w()(t.data.result);!(n=(c=u.next()).done);n=!0){var d=c.value;"0"===d.isError&&e("addTransaction",{date:r(d.timeStamp),to:d.to,from:d.from,value:new k.a(d.value),kind:o,isIncoming:d.to===a})}}catch(t){s=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(s)throw i}}e("completeAccount",a)})},loadPriceHistory:function(t,n){var e=t.commit,o=n.fromSymbol,a=n.toSymbol,s={};e("addPriceHistory",{fromSymbol:o,toSymbol:a,history:s});var i="https://min-api.cryptocompare.com/data/histoday?fsym="+o+"&tsym="+a+"&limit=365";return x.a.get(i).then(function(t){var n=!0,i=!1,c=void 0;try{for(var u,d=w()(t.data.Data);!(n=(u=d.next()).done);n=!0){var l=u.value,v=r(l.time);s[v]=new k.a(l.close)}}catch(t){i=!0,c=t}finally{try{!n&&d.return&&d.return()}finally{if(i)throw c}}e("addPriceHistory",{fromSymbol:o,toSymbol:a,history:s})})}}});c.a.config.productionTip=!1,new c.a({el:"#app",router:g,store:C,template:"<App/>",components:{App:d}});var $=function(t){return"CACHE::"+t.url},I=window.sessionStorage;x.a.interceptors.request.use(function(t){var n=$(t);if("get"!==t.method)return t;var e=I.getItem(n);return e?(t.adapter=function(){return i.a.resolve({data:JSON.parse(e),status:t.status,statusText:t.statusText,headers:t.headers,config:t,request:t})},t):t},function(t){return i.a.reject(t)}),x.a.interceptors.response.use(function(t){if(t.status>200||"get"!==t.config.method)return t;var n=$(t.config);return I.setItem(n,a()(t.data)),t},function(t){return i.a.reject(t)})},TMTm:function(t,n){},gA0x:function(t,n){},tPvk:function(t,n){},zTJO:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.de80755703260cd68042.js.map